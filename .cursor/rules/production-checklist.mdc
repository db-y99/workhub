---
description: Production deployment checklist and review guide. Use this rule when preparing for production deployment, reviewing code before deployment, setting up monitoring/analytics, configuring security settings, or optimizing performance. This checklist covers build verification, configuration checks, monitoring setup, error handling, security, performance optimization, and documentation requirements.
alwaysApply: true
---

## ğŸ“‹ PRODUCTION CHECKLIST

**LÆ°u Ã½:** ÄÃ¢y lÃ  checklist Ä‘á»ƒ review trÆ°á»›c khi deploy, khÃ´ng pháº£i rules cá»©ng. Má»™t sá»‘ items cÃ³ thá»ƒ skip trong development.

---

## ğŸ” BUILD & ANALYSIS

### 1. Build Check
```bash
# âœ… LuÃ´n cháº¡y build trÆ°á»›c khi deploy
npm run build
```

**Kiá»ƒm tra:**
- [ ] Build thÃ nh cÃ´ng khÃ´ng cÃ³ errors
- [ ] KhÃ´ng cÃ³ warnings nghiÃªm trá»ng
- [ ] Static pages Ä‘Æ°á»£c generate Ä‘Ãºng
- [ ] Dynamic routes Ä‘Æ°á»£c mark Ä‘Ãºng

### 2. Route Analysis
**Kiá»ƒm tra output cá»§a `next build`:**

```
Route (app)                              Size     First Load JS
â”Œ â—‹ /                                    5.2 kB         85.3 kB
â”œ â—‹ /about                              2.1 kB         82.2 kB
â”œ â— /dashboard                          3.4 kB         86.5 kB
â”” â— /dashboard/users                    4.1 kB         87.2 kB
```

**Kiá»ƒm tra:**
- [ ] Routes nÃ o lÃ  Static (â—‹) vs Dynamic (â—)
- [ ] Static routes cÃ³ Ä‘á»§ khÃ´ng? (Æ°u tiÃªn static cho content pages)
- [ ] Dynamic routes chá»‰ dÃ¹ng khi cáº§n thiáº¿t
- [ ] Bundle size há»£p lÃ½ (< 200KB First Load JS)

### 3. Bundle Size Monitoring
**Kiá»ƒm tra bundle size:**

```bash
# Analyze bundle size
npm run build
# Check .next/analyze/ hoáº·c dÃ¹ng @next/bundle-analyzer
```

**Guidelines:**
- âœ… First Load JS < 200KB (ideal)
- âœ… Individual route < 100KB
- âœ… Large dependencies Ä‘Æ°á»£c dynamic import
- âœ… KhÃ´ng cÃ³ duplicate dependencies

---

## âš™ï¸ CONFIGURATION

### 4. React Strict Mode
**File:** `next.config.js`

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true, // âœ… Báº®T BUá»˜C trong production
};

module.exports = nextConfig;
```

**LÃ½ do:**
- PhÃ¡t hiá»‡n potential bugs sá»›m
- Warn vá» deprecated APIs
- Better development experience

**Kiá»ƒm tra:**
- [ ] `reactStrictMode: true` Ä‘Ã£ Ä‘Æ°á»£c set
- [ ] KhÃ´ng cÃ³ warnings trong console khi dev

### 5. Environment Variables
**Kiá»ƒm tra:**
- [ ] Táº¥t cáº£ env variables Ä‘Ã£ Ä‘Æ°á»£c set trong production
- [ ] KhÃ´ng cÃ³ hardcoded secrets trong code
- [ ] `NEXT_PUBLIC_*` variables Ä‘Ãºng (sáº½ expose cho client)
- [ ] Server-only env variables khÃ´ng expose cho client

---

## ğŸ“Š MONITORING & ANALYTICS

### 6. Vercel Analytics (náº¿u deploy trÃªn Vercel)
**Setup:**
```typescript
// app/layout.tsx
import { Analytics } from '@vercel/analytics/react';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <Analytics /> {/* âœ… ThÃªm Analytics */}
      </body>
    </html>
  );
}
```

**Kiá»ƒm tra:**
- [ ] Analytics Ä‘Ã£ Ä‘Æ°á»£c setup
- [ ] Page views Ä‘Æ°á»£c track Ä‘Ãºng
- [ ] Custom events (náº¿u cÃ³) hoáº¡t Ä‘á»™ng

### 7. Speed Insights (náº¿u deploy trÃªn Vercel)
**Setup:**
```typescript
// app/layout.tsx
import { SpeedInsights } from '@vercel/speed-insights/next';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <SpeedInsights /> {/* âœ… ThÃªm Speed Insights */}
      </body>
    </html>
  );
}
```

**Kiá»ƒm tra:**
- [ ] Speed Insights Ä‘Ã£ Ä‘Æ°á»£c setup
- [ ] Core Web Vitals Ä‘Æ°á»£c track
- [ ] Performance metrics Ä‘Æ°á»£c monitor

---

## ğŸ› ERROR HANDLING

### 8. Error Boundaries
**Kiá»ƒm tra:**
- [ ] Error boundaries Ä‘Ã£ Ä‘Æ°á»£c setup (`error.tsx`)
- [ ] Error logging hoáº¡t Ä‘á»™ng (náº¿u cÃ³)
- [ ] User-friendly error messages

### 9. Server Actions Error Handling
**Kiá»ƒm tra:**
- [ ] Server Actions cÃ³ error handling Ä‘áº§y Ä‘á»§
- [ ] Errors Ä‘Æ°á»£c log (khÃ´ng expose sensitive info)
- [ ] User nháº­n Ä‘Æ°á»£c friendly error messages

---

## ğŸ”’ SECURITY

### 10. Security Headers
**File:** `next.config.js`

```javascript
const nextConfig = {
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          {
            key: 'Referrer-Policy',
            value: 'strict-origin-when-cross-origin',
          },
        ],
      },
    ];
  },
};
```

**Kiá»ƒm tra:**
- [ ] Security headers Ä‘Ã£ Ä‘Æ°á»£c set (náº¿u cáº§n)
- [ ] CORS Ä‘Æ°á»£c config Ä‘Ãºng (náº¿u cÃ³ API routes)
- [ ] Authentication/Authorization hoáº¡t Ä‘á»™ng Ä‘Ãºng

---

## âš¡ PERFORMANCE

### 11. Image Optimization
**Kiá»ƒm tra:**
- [ ] Táº¥t cáº£ images dÃ¹ng Next.js `Image` component
- [ ] Images cÃ³ `width` vÃ  `height` set
- [ ] Above-the-fold images cÃ³ `priority={true}`
- [ ] Image domains Ä‘Æ°á»£c whitelist trong `next.config.js` (náº¿u dÃ¹ng remote images)

### 12. Font Optimization
**Kiá»ƒm tra:**
- [ ] Fonts dÃ¹ng `next/font` (khÃ´ng load tá»« CDN)
- [ ] Font display strategy Ä‘Æ°á»£c set (`swap`)

### 13. Cache Strategy
**Kiá»ƒm tra:**
- [ ] Fetch operations cÃ³ cache strategy phÃ¹ há»£p
- [ ] Static content dÃ¹ng `force-cache`
- [ ] ISR content cÃ³ `revalidate` time há»£p lÃ½
- [ ] Dynamic content dÃ¹ng `no-store` khi cáº§n

---

## ğŸ“ DOCUMENTATION

### 14. README & Documentation
**Kiá»ƒm tra:**
- [ ] README.md cÃ³ Ä‘áº§y Ä‘á»§ setup instructions
- [ ] Environment variables Ä‘Æ°á»£c document
- [ ] Deployment process Ä‘Æ°á»£c document
- [ ] API endpoints Ä‘Æ°á»£c document (náº¿u cÃ³)

---

## ğŸ¯ QUICK CHECKLIST

**TrÆ°á»›c khi deploy:**
- [ ] `npm run build` thÃ nh cÃ´ng
- [ ] `reactStrictMode: true` trong config
- [ ] Environment variables Ä‘Ã£ set
- [ ] Error boundaries hoáº¡t Ä‘á»™ng
- [ ] Images Ä‘Æ°á»£c optimize
- [ ] Fonts dÃ¹ng `next/font`
- [ ] Cache strategy phÃ¹ há»£p
- [ ] Analytics/Speed Insights setup (náº¿u cáº§n)
- [ ] Security headers Ä‘Æ°á»£c config (náº¿u cáº§n)
- [ ] Documentation Ä‘áº§y Ä‘á»§

---

## ğŸ“š REFERENCES

- [Next.js Production Deployment](https://nextjs.org/docs/deployment)
- [Vercel Analytics](https://vercel.com/docs/analytics)
- [Vercel Speed Insights](https://vercel.com/docs/speed-insights)
- [Next.js Security Headers](https://nextjs.org/docs/app/api-reference/next-config/headers)
